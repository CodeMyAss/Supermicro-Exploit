my $openme = $ARGV[0];
open my $handle, '<', $openme;
chomp( my @servers = <$handle> );
close $handle;

my $bad;
my $good;
my $total = `cat $openme | wc -l`;
$|=1;
chomp $total;

for my $line (@servers) {

	my ($ip,$string) = split (/ /, $line, 2);

	if ($string =~ /41444d494e/) {
		$string =~ s/([a-fA-F0-9][a-fA-F0-9])/chr(hex($1))/eg;
		chomp $string;
       		$string =~ s/[^[:print:]]/ /g;
        	$sting =~ s/( )\1+/$1/gi;
$good++;
print "\rGood: $good | Bad: $bad | Total: $total";
open (FILE, ">>file.txt");
print FILE "$ip $string\n";
close FILE;

} else {
		$bad++;
		print "\rGood: $good | Bad: $bad | Total: $total";
	}
}
print "\n";
